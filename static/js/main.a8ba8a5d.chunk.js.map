{"version":3,"sources":["components/Item.js","components/AddItem.js","js/drawPi.js","components/PI.js","js/setupCanvas.js","App.js","reportWebVitals.js","index.js"],"names":["Item","props","nameRef","amountRef","handleRemoveClick","e","setHiddenItems","curr","idx","useEffect","setInputRefs","prevState","className","data-idx","onClick","type","name","ref","elem","focus","AddItem","id","setItems","current","uID","updateInputDisplay","setUID","drawPi","canvas","rect","data","img","endAngleRadians","r","Math","PI","drawSegment","amount","int","ratio","total","color","sortedColorArray","endAngle","startAngle","context","save","beginPath","moveTo","width","height","arc","radius","fillStyle","fill","restore","sortedData","getContext","calculateRadius","arr","i","length","rgba","push","str","join","reverse","clearRect","fontSize","fillRect","textAlign","textBaseline","font","fillText","drawTitleSplash","key","hasOwnProperty","reduce","accum","Number","sort","objB","objA","valueA","valueB","sortData","v","k","text","y","textWidth","measureText","closeEnoughFontHeight","drawLegend","dataURL","toDataURL","replace","src","Pi","canvasRef","useLayoutEffect","parent","dpr","window","devicePixelRatio","parentRect","getBoundingClientRect","scale","setupCanvas","parentElement","pRect","canvasData","imgRef","App","useState","setCanvasData","items","hiddenItems","inputRefs","React","createRef","processInputData","getInputValueByName","j","getAttribute","value","indexOf","obj","targetName","targetAmount","filter","item","alt","onSubmit","preventDefault","map","index","Date","getFullYear","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a8ba8a5d.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\r\n\r\nexport default function Item(props) {\r\n  let nameRef = null;\r\n  let amountRef = null;\r\n  \r\n  const setNameRef = (elem) => {\r\n    nameRef = elem;\r\n    \r\n    if (nameRef) {\r\n      nameRef.focus();\r\n    }\r\n  }\r\n\r\n  const setAmountRef = (elem) => {\r\n    amountRef = elem;\r\n  }\r\n\r\n  function handleRemoveClick(e) {\r\n    props.setHiddenItems((curr) => [...curr, `idx-${props.idx}`]);\r\n  }\r\n\r\n  useEffect(() => {\r\n    props.setInputRefs((prevState) => [\r\n      ...prevState,\r\n      nameRef,\r\n      amountRef,\r\n    ]);\r\n  }, [\r\n    props,\r\n    handleRemoveClick,\r\n  ]);\r\n\r\n  return (\r\n    <tr \r\n      className=\"item\"\r\n      data-idx={`idx-${props.idx}`}\r\n    >\r\n      <td>\r\n        <button\r\n          className=\"remove-item\"\r\n          onClick={handleRemoveClick}\r\n          type=\"button\"\r\n        >\r\n          <span>Remove Item</span>\r\n        </button>\r\n      </td>\r\n      <td>\r\n        <input\r\n          name={`name_${props.idx}`}\r\n          ref={setNameRef}\r\n          type=\"text\"\r\n        />\r\n      </td>\r\n      <td>\r\n        <input\r\n          name={`amount_${props.idx}`}\r\n          ref={setAmountRef}\r\n          type=\"number\"\r\n        />\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport Item from './Item';\r\n\r\nexport default function AddItem(props) {\r\n  function addItem() {\r\n    props.setItems((current) => [\r\n      ...current,\r\n      <Item\r\n        key={`idx-${props.uID}`}\r\n        idx={`${props.uID}`}\r\n        updateInputDisplay={props.updateInputDisplay}\r\n        setInputRefs={props.setInputRefs}\r\n        setHiddenItems={props.setHiddenItems}\r\n      />\r\n    ]);\r\n\r\n    props.setUID(props.uID + 1);\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className=\"button add-item\"\r\n      id=\"add-item\"\r\n      onClick={addItem}\r\n      type=\"button\"\r\n    >\r\n      Slice\r\n    </button>\r\n  );\r\n}\r\n","export default function drawPi(canvas, rect, data, img) {\r\n  function drawTitleSplash() {\r\n    const fontSize = radius / 4;\r\n    \r\n    context.save();\r\n    \r\n    context.fillStyle = 'rgb(136, 0, 21)';\r\n    context.fillRect(0, 0, rect.width, rect.height);\r\n\r\n    context.fillStyle = '#ffffff';\r\n    context.textAlign = \"center\";\r\n    context.textBaseline = \"middle\";\r\n    context.font = `${fontSize}px sans-serif`; // base off of window?\r\n    context.fillText(\"Slices\", rect.width / 2, rect.height / 2);\r\n    context.restore();    \r\n  }\r\n  \r\n  function drawLegend() {\r\n    function drawMessage(text, y, color) {\r\n      context.save();\r\n      context.fillStyle = '#ffffff';\r\n      context.fillText(text, textWidth, y);\r\n      context.fillStyle = color;\r\n      context.fillText(text, textWidth, y);\r\n\r\n      context.restore();\r\n    }\r\n    \r\n    const fontSize = radius / 15;\r\n\r\n    context.save();\r\n\r\n    context.textAlign = \"left\";\r\n    context.textBaseline = \"top\";\r\n    context.font = `${fontSize}px sans-serif`; // base off of window?\r\n\r\n    const textWidth = context.measureText('M').width;\r\n    const closeEnoughFontHeight = 1.125 * textWidth;\r\n    \r\n    for (let i = 0; i < sortedData.length; i++) {\r\n      let k;\r\n      \r\n      for (var key in sortedData[i]) {\r\n        if (sortedData[i].hasOwnProperty(key)) {\r\n          k = key;\r\n        }\r\n      }\r\n\r\n      drawMessage(k, i * closeEnoughFontHeight + closeEnoughFontHeight, sortedColorArray[i]);\r\n    }\r\n    \r\n    context.restore();\r\n  }\r\n\r\n  function calculateRadius() {\r\n    let radius;\r\n    \r\n    if (rect.width > rect.height) {\r\n      radius = (3/4) * rect.height;\r\n    } else {\r\n      radius = (3/4) * rect.width;\r\n    }\r\n    \r\n    radius = radius / 2;\r\n\r\n    return radius;\r\n  }\r\n  \r\n  function sortData(data) {\r\n    return data.sort(function(objB, objA) {\r\n      let valueA;\r\n      let valueB;\r\n\r\n      for (let key in objA) {\r\n        if (objA.hasOwnProperty(key)) {\r\n          valueA = objA[key];\r\n        }\r\n      }\r\n      \r\n      for (let key in objB) {\r\n        if (objB.hasOwnProperty(key)) {\r\n          valueB = objB[key];\r\n        }\r\n      }\r\n      \r\n      return valueA - valueB;\r\n    }); \r\n  }\r\n    \r\n  function degreesToRadians(deg) {\r\n    return deg * Math.PI / 180;\r\n  }\r\n  \r\n  function endAngleRadians(r) {\r\n    const radians360 = degreesToRadians(360);\r\n    const angle = r * radians360;\r\n    \r\n    return angle;\r\n  }\r\n  \r\n  function drawSegment(name, amount, int) {\r\n    const ratio = amount / total;\r\n    const color = sortedColorArray[int];\r\n    const endAngle = startAngle - endAngleRadians(ratio);\r\n    \r\n    context.save();\r\n    \r\n    context.beginPath();\r\n    context.moveTo(rect.width / 2, rect.height / 2);\r\n    context.arc(rect.width / 2, rect.height / 2, radius, startAngle, endAngle, true);\r\n\r\n    context.fillStyle = color;\r\n    context.fill();\r\n    context.restore();\r\n\r\n    // side effects and additional mutations\r\n    startAngle = endAngle;\r\n  }\r\n  \r\n  const context = canvas.getContext('2d');\r\n  const radius = calculateRadius();\r\n  \r\n  let sortedData;\r\n  let startAngle = -Math.PI / 2;\r\n  let total = 1;\r\n  \r\n  const sortedColorArray = (function() {\r\n    const arr = [];\r\n\r\n    for (let i = 1; i < data.length + 1; i++) {\r\n      const rgba = [\r\n        30,\r\n        30,\r\n        30,\r\n      ];\r\n      \r\n      rgba.push(i / data.length);\r\n\r\n      const str = `rgba(${rgba.join(',')})`;\r\n      \r\n      arr.push(str);\r\n    }\r\n    \r\n    arr.reverse();\r\n    \r\n    return arr;\r\n  }());\r\n\r\n  context.clearRect(0, 0, rect.width, rect.height);\r\n\r\n  if (data.length < 1) {\r\n    drawTitleSplash();\r\n  } else {\r\n    total = (function() {\r\n      var arr = [];\r\n\r\n      for (let i = 0; i < data.length; i++) {\r\n        for (var key in data[i]) {\r\n          if (data[i].hasOwnProperty(key)) {\r\n            arr.push(data[i][key]);\r\n          }\r\n        }\r\n      }\r\n\r\n      if (arr.length > 0) {\r\n        return arr.reduce((accum, curr) => Number(accum) + Number(curr));        \r\n      }\r\n    }());\r\n\r\n    sortedData = sortData(data);\r\n\r\n    for (let i = 0; i < sortedData.length; i++) {\r\n      let k;\r\n      let v;\r\n\r\n      for (var key in sortedData[i]) {\r\n        if (sortedData[i].hasOwnProperty(key)) {\r\n          k = key;\r\n          v = sortedData[i][key];\r\n        }\r\n      }\r\n\r\n      drawSegment(k, v, i);\r\n    }\r\n\r\n    drawLegend();\r\n  }\r\n\r\n  const dataURL = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");\r\n\r\n  img.src = dataURL;\r\n}\r\n","import setupCanvas from '../js/setupCanvas';\r\nimport drawPi from '../js/drawPi';\r\n\r\nimport React, {useEffect, useLayoutEffect} from 'react';\r\n\r\nexport default function Pi(props) {\r\n  const canvasRef = props.canvasRef;\r\n  \r\n  useLayoutEffect(function() {\r\n    const canvas = canvasRef.current;\r\n\r\n    if (canvas) {\r\n      setupCanvas(canvas, canvas.parentElement);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    const pRect = canvas.parentElement.getBoundingClientRect();\r\n\r\n    drawPi(canvas, pRect, props.canvasData, props.imgRef.current);\r\n  }, [\r\n    [props]\r\n  ]);\r\n\r\n  return (\r\n    <div className=\"canvas-wrapper\">\r\n      <canvas\r\n        id=\"pi\"\r\n        ref={props.canvasRef}\r\n      >\r\n      </canvas>\r\n    </div>\r\n  );\r\n}\r\n","export default function setupCanvas(canvas, parent) {\r\n  var dpr = window.devicePixelRatio || 1;\r\n  var context = canvas.getContext('2d');\r\n\r\n  var parentRect = parent.getBoundingClientRect();\r\n  \r\n  canvas.width = dpr * parentRect.width;\r\n  canvas.height = dpr * parentRect.height;\r\n  \r\n  return context.scale(dpr, dpr);\r\n}","import './css/reset.css';\r\nimport './css/App.css';\r\nimport './css/buttons.css';\r\nimport './css/items.css';\r\nimport './css/pi.css';\r\n\r\nimport React, {useEffect, useState} from 'react';\r\n\r\nimport AddItem from './components/AddItem';\r\nimport PI from './components/PI';\r\nimport Export from './components/Export';\r\n\r\nfunction App() {\r\n  const [uID, setUID] = useState(0);\r\n  const [canvasData, setCanvasData] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n  const [hiddenItems, setHiddenItems] = useState([]);\r\n  const [inputRefs, setInputRefs] = useState([]);\r\n  const canvasRef = React.createRef();\r\n  const imgRef = React.createRef();\r\n  \r\n  function processInputData() {\r\n    function getInputValueByName(name) {\r\n      let v;\r\n\r\n      for (let j = 0; j < inputRefs.length; j++) {\r\n        if (inputRefs[j].getAttribute('name') === name) {\r\n          v = inputRefs[j].value;\r\n        }\r\n      }\r\n\r\n      return v;\r\n    }\r\n\r\n    const data = (function() {\r\n      const arr = [];\r\n\r\n      for (let i = 0; i < uID; i++) {\r\n        if (hiddenItems.indexOf(`idx-${i}`) !== -1) {\r\n          continue;\r\n        }\r\n\r\n        const obj = {};\r\n        const targetName = `name_${i}`;\r\n        const targetAmount = `amount_${i}`;\r\n        const key = getInputValueByName(targetName);\r\n        const value = getInputValueByName(targetAmount);\r\n\r\n        if (key && value) {\r\n          obj[key] = value;\r\n\r\n          arr.push(obj);\r\n        }\r\n      }\r\n\r\n      return arr;\r\n    }());\r\n\r\n    setCanvasData(data);\r\n  }\r\n  \r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    processInputData();\r\n  }\r\n  \r\n  useEffect(() => {\r\n    updateInputDisplay();\r\n  }, [\r\n    hiddenItems,\r\n  ]);\r\n\r\n  function updateInputDisplay() {\r\n    setItems((current) => [...current].filter(item => hiddenItems.indexOf(item.key) === -1));\r\n    processInputData();\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header>\r\n        <h1>Slices</h1>\r\n      </header>\r\n      <main>\r\n        <PI\r\n          canvasData={canvasData}\r\n          canvasRef={canvasRef}\r\n          imgRef={imgRef}\r\n        />\r\n        <section className=\"mainbar\">\r\n          <div className=\"figure-wrapper\">\r\n            <figure>\r\n              <img \r\n                alt=\"Canvas data renders here\"\r\n                id=\"imgPi\"\r\n                src=\"\"\r\n                ref={imgRef}\r\n              />\r\n            </figure>\r\n          </div>\r\n        </section>\r\n        <section className=\"sidebar\">\r\n          <form onSubmit={handleSubmit}>\r\n            {items.length > 0 ? \r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <th>&nbsp;</th>\r\n                    <th>Name</th>\r\n                    <th>Amount</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {items.map((item, index) => item)}\r\n                </tbody>\r\n              </table>\r\n            : null\r\n            }\r\n            <div className=\"actions\">\r\n              <AddItem \r\n                processInputData={processInputData}\r\n                setInputRefs={setInputRefs}\r\n                setHiddenItems={setHiddenItems}\r\n                updateInputDisplay={updateInputDisplay}\r\n                setItems={setItems}\r\n                setUID={setUID}\r\n                uID={uID}\r\n              />\r\n              <button\r\n                className=\"button make-chart\"\r\n                type=\"submit\"\r\n              >\r\n                π\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </section>\r\n      </main>\r\n      <footer>\r\n        <p><small>&copy;{new Date().getFullYear()} Mike Kang</small></p>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}